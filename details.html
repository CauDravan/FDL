<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Level Details — CD Clears</title>
  <link rel="icon" type="image/png" href="src/assets/art/sob_cat.png" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@300;400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            orbitron: ['Orbitron', 'sans-serif']
          },
          colors: {
            pink: {
              primary: '#ff2d95',
              secondary: '#ff6bb5',
              dark: '#c71866'
            }
          }
        }
      }
    }
  </script>
  <style>
    body { font-family: 'Orbitron', sans-serif; }
    @keyframes glow {
      0%, 100% { transform: translate(0, 0) rotate(0deg); }
      50% { transform: translate(-20px, 20px) rotate(180deg); }
    }
    .animate-glow {
      animation: glow 20s ease-in-out infinite;
    }
  </style>
</head>
<body class="bg-black text-white font-orbitron min-h-screen p-5 md:p-10 relative overflow-x-hidden">
  
  <!-- Animated Background Glow -->
  <div class="fixed top-0 left-0 w-[200%] h-[200%] -translate-x-1/2 -translate-y-1/2 pointer-events-none z-0 animate-glow">
    <div class="absolute inset-0 bg-[radial-gradient(circle_at_20%_30%,rgba(255,45,149,0.15)_0%,transparent_50%)]"></div>
    <div class="absolute inset-0 bg-[radial-gradient(circle_at_80%_70%,rgba(199,24,102,0.1)_0%,transparent_50%)]"></div>
  </div>

  <div class="max-w-4xl mx-auto relative z-10">
    
    <!-- Header Section -->
    <div class="bg-gradient-to-br from-pink-primary/10 to-pink-primary/2 border border-pink-dark rounded-2xl p-8 mb-8 text-center relative overflow-hidden">
      <div class="absolute top-0 left-0 w-full h-0.5 bg-gradient-to-r from-transparent via-pink-primary to-transparent"></div>
      <h1 class="text-4xl md:text-5xl font-bold text-pink-primary mb-3" style="text-shadow: 0 0 20px rgba(255,45,149,0.3)">
        Level Details
      </h1>
      <div class="text-sm text-zinc-500 font-light uppercase tracking-widest">
        CD Clears Database
      </div>
    </div>

    <!-- Details Container -->
    <div id="detailsContainer" class="space-y-4 mb-8">
      <div class="text-center py-20 text-zinc-500">Loading level data...</div>
    </div>

    <!-- Back Button -->
    <a 
      href="index.html" 
      class="inline-flex items-center gap-3 px-7 py-4 bg-gradient-to-r from-pink-primary to-pink-dark text-white font-bold rounded-xl transition-all hover:-translate-y-1 hover:shadow-xl hover:shadow-pink-primary/50 hover:from-pink-secondary hover:to-pink-primary"
    >
      <span class="text-xl">←</span>
      <span class="tracking-wide">Back to Dashboard</span>
    </a>
  </div>

  <script>
    (function(){
      const CONFIG = {
        sheetId: '1j6RlyzBKN0WX_HsLL4J0mzzF1TzYauxok55dIKA1U2o',
        sheetName: 'Level(Cd)',
        fields: [ 
          'IDL','Date','ID','FDG','Game','Developer','Level','Own Rate','Rate',
          'Genres','Feel','Exp','BS','Data','Vision','Speed','Acc','Str','Player','Video' 
        ]
      };

      const safe = (v) => v == null || v === '' ? '-' : String(v);
      
      const query = new URLSearchParams(window.location.search);
      const id = query.get('id');
      const url = `https://opensheet.elk.sh/${CONFIG.sheetId}/${CONFIG.sheetName}`;

      fetch(url)
        .then(r => {
          if (!r.ok) throw new Error('HTTP ' + r.status);
          return r.json();
        })
        .then(data => {
          const entry = (data || []).find(row => String(row['IDL']) === String(id));
          const container = document.getElementById('detailsContainer');
          
          if (!entry) { 
            container.innerHTML = `
              <div class="bg-red-500/10 border border-red-500 text-red-400 p-6 rounded-xl text-center">
                No level found for IDL = ${safe(id)}
              </div>
            `; 
            return; 
          }
          
          // Render details
          const html = CONFIG.fields.map(field => {
            let valueHtml = '';
            
            if (field === 'Video' && entry[field]) {
              valueHtml = `<a href="${entry[field]}" target="_blank" class="text-pink-primary hover:text-pink-secondary transition-colors break-all">${safe(entry[field])}</a>`;
            } else if (field === 'Level') {
              const val = safe(entry[field]);
              valueHtml = `<span class="inline-block px-4 py-2 bg-gradient-to-r from-pink-primary to-pink-dark text-white font-bold rounded-lg shadow-lg shadow-pink-primary/30 tracking-wider">${val}</span>`;
            } else if (field === 'Genres' && entry[field]) {
              const genres = String(entry[field]).split(/[,;|]+/).map(g => g.trim()).filter(Boolean);
              if (genres.length > 0) {
                valueHtml = `
                  <div class="flex flex-wrap gap-2 justify-end">
                    ${genres.map(g => `<span class="px-3 py-1 bg-pink-primary/15 border border-pink-dark rounded-md text-pink-secondary text-xs font-semibold">${g}</span>`).join('')}
                  </div>
                `;
              } else {
                valueHtml = safe(entry[field]);
              }
            } else {
              valueHtml = safe(entry[field]);
            }
            
            return `
              <div class="bg-gradient-to-r from-zinc-900 to-zinc-950 border border-zinc-800 rounded-xl p-5 transition-all hover:border-pink-primary hover:translate-x-1 hover:shadow-lg hover:shadow-pink-primary/30 group relative overflow-hidden">
                <div class="absolute top-0 left-0 w-1 h-full bg-gradient-to-b from-pink-primary to-pink-dark scale-y-0 group-hover:scale-y-100 transition-transform duration-300"></div>
                <div class="flex flex-col md:flex-row justify-between md:items-center gap-3 md:gap-5">
                  <span class="text-sm font-semibold text-pink-secondary uppercase tracking-wide min-w-[140px]">${field}</span>
                  <div class="text-zinc-300 text-sm text-left md:text-right flex-1">${valueHtml}</div>
                </div>
              </div>
            `;
          }).join('');
          
          container.innerHTML = html;
        })
        .catch(err => {
          document.getElementById('detailsContainer').innerHTML = `
            <div class="bg-red-500/10 border border-red-500 text-red-400 p-6 rounded-xl text-center">
              Error loading data: ${String(err)}
            </div>
          `;
          console.error(err);
        });
    })();
  </script>
</body>
</html>